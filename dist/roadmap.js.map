{"version":3,"sources":["webpack:///roadmap.js","webpack:///webpack/bootstrap 883662743a122660fc63","webpack:///C:/Users/BBA/Documents/GitHub/roadmap/source/js/roadmap.js","webpack:///C:/Users/BBA/Documents/GitHub/roadmap/source/js/helper.js","webpack:///C:/Users/BBA/Documents/GitHub/roadmap/source/js/view.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","_helper","helper","_view","view","$","broadcast","roadmap","set","store","showStats","stats","statRules","map","rule","most","value","visa","less","handleRule","userVisa","index","fn","userStats","stat","forEach","text","swap","direction","this","parents","data","refIndex","storeReference","indexOf","historyRef","history","push","time","Firebase","ServerValue","TIMESTAMP","hash","window","location","replace","baseDomain","host","base","room","child","reference","threshold","presence","thresholdValue","showingStats","on","newStoreResp","val","renderRoadmap","renderReference","limitToLast","childSnapshot","event","renderActionNotification","removeClass","setTimeout","addClass","onAuth","authData","uid","console","log","amOnline","userRef","snapshot","onDisconnect","remove","focus","displayOnline","chart","c3","generate","x","columns","type","axis","y","padding","tick","format","date","Date","format2","getHours","getMinutes","transition","duration","times","saved","users","nbPoints","eventVisa","user","up","down","total","toRef","againstRef","setInterval","Math","floor","now","remaining","length","i","unshift","shift","keys","eventTime","lastTime","timeIndex","concat","load","toggleClass","$item","parseInt","isNaN","content","JSON","stringify","ref","downloadAsFile","Blob","originalEvent","dataTransfer","dropEffect","file","files","reader","FileReader","onload","e","parse","target","result","X_x","readAsText","splice","hasClass","effectAllowed","setData","item","find","$this","preventDefault","stopPropagation","targetIndex","originIndex","getData","hide","login","authAnonymously","error","show","unauth","trigger","int","filename","saveAs","navigator","msSaveBlob","bind","downloadLink","document","createElement","href","URL","createObjectURL","setAttribute","body","appendChild","click","removeChild","defineProperty","changed","isReference","isCandidate","markup","isNotLast","$element","join","attr","$elementContainer","newStoreView","nbItems","html","append","thresholdMarkup","storeView","online","$online"],"mappings":"CAAS,SAAUA,GCInB,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAE,OAGA,IAAAC,GAAAF,EAAAD,IACAE,WACAE,GAAAJ,EACAK,QAAA,EAUA,OANAP,GAAAE,GAAAM,KAAAH,EAAAD,QAAAC,IAAAD,QAAAH,GAGAI,EAAAE,QAAA,EAGAF,EAAAD,QAvBA,GAAAD,KAqCA,OATAF,GAAAQ,EAAAT,EAGAC,EAAAS,EAAAP,EAGAF,EAAAU,EAAA,GAGAV,EAAA,KDMM,SAASI,EAAQD,EAASH,GAG/B,YAEA,SAASW,GAAwBC,GAAO,GAAIA,GAAOA,EAAIC,WAAc,MAAOD,EAAc,IAAIE,KAAa,IAAW,MAAPF,EAAe,IAAK,GAAIG,KAAOH,GAAWI,OAAOC,UAAUC,eAAeX,KAAKK,EAAKG,KAAMD,EAAOC,GAAOH,EAAIG,GAAmC,OAAzBD,GAAO,WAAaF,EAAYE,EAErQ,GAAIK,GAAUnB,EElDS,GAAZoB,EAAMT,EAAAQ,GFsDbE,EAAQrB,EErDS,GAAVsB,EAAIX,EAAAU,EAEhBE,GAAE,WA8CD,QAASC,KACRC,EAAQC,IAAIC,GA4Ib,QAASC,KACR,GAAIC,GAAQC,EAAUC,IAAI,SAASC,GAClC,OACC3B,GAAI2B,EAAK3B,GACT4B,MACCC,MAAO,KACPC,KAAM,OAEPC,MACCF,MAAO,KACPC,KAAM,UAKLE,EAAa,SAASC,GACzB,MAAO,UAASN,EAAMO,GACrB,GAAIL,GAAQF,EAAKQ,GAAGC,EAAUH,IAC1BI,EAAOb,EAAMU,GACbN,EAAOS,EAAKT,KACZG,EAAOM,EAAKN,MACG,OAAfH,EAAKC,OAAkBA,GAASD,EAAKC,SACxCD,EAAKC,MAAQA,EACbD,EAAKK,SAAWA,IAEE,OAAfF,EAAKF,OAAkBA,EAAQE,EAAKF,SACvCE,EAAKF,MAAQA,EACbE,EAAKE,SAAWA,IAInB,KAAK,GAAIA,KAAYG,GACpBX,EAAUa,QAAQN,EAAWC,GAG9BT,GAAMc,QAAQ,SAASD,GACtBnB,EAAE,eAAiBmB,EAAKrC,GAAK,qBAAqBuC,KAAKF,EAAKT,KAAKE,MACjEZ,EAAE,eAAiBmB,EAAKrC,GAAK,qBAAqBuC,KAAKF,EAAKN,KAAKD,QAmJnE,QAASU,GAAKC,GACb,MAAO,YACN,GAAIP,GAAQhB,EAAEwB,MAAMC,QAAQ,iBAAiBC,KAAK,QAClD,IAAc,OAAVV,EACH,OAAO,CAGR,IAAIL,GAAQP,EAAMY,EAKlB,IAJAZ,EAAMY,GAASZ,EAAMY,EAAQO,GAC7BnB,EAAMY,EAAQO,GAAaZ,EAC3BV,IAEIW,EAAM,CACT,GAAIe,GAAWC,EAAeC,QAAQlB,GAClCmB,EAAaC,EAAQC,MACzBF,GAAW3B,KACVS,KAAMA,EACNI,MAAOA,EACPW,SAAUA,EACVhB,MAAOA,EACPsB,KAAMC,SAASC,YAAYC,UAC3Bb,UAAWA,IAGb,OAAO,GAzYT,GAAIc,GAAO,QAAUC,OAAOC,SAASF,KAAKG,QAAQ,gBAAiB,IAE/DC,EAA2D,KAA9CH,OAAOC,SAASG,KAAKb,QAAQ,aAAsB,WAAa,mBAE7Ec,EAAO,GAAIT,UAAS,WAAaO,EAAa,oBAC9CG,EAAOD,EAAKE,MAAMR,GAClBnC,EAAU0C,EAAKC,MAAM,WACrBC,EAAYF,EAAKC,MAAM,aACvBE,EAAYH,EAAKC,MAAM,aACvBd,EAAUa,EAAKC,MAAM,WACrBG,EAAWJ,EAAKC,MAAM,YAQtBzC,KACAwB,KACAqB,EAAiB,EACjBC,GAAe,CAQnBhD,GAAQiD,GAAG,QAAS,SAASC,GAC5BhD,EAAQgD,EAAaC,UACrBtD,EAAKuD,cAAclD,EAAO6C,KAE3BH,EAAUK,GAAG,QAAS,SAASzB,GAC9BE,EAAiBF,EAAK2B,UACtBtD,EAAKwD,gBAAgB3B,EAAgBqB,KAGtCF,EAAUI,GAAG,QAAS,SAASzB,GAC9BuB,EAAiBvB,EAAK2B,MACtBtD,EAAKuD,cAAclD,EAAO6C,GAC1BlD,EAAKwD,gBAAgB3B,EAAgBqB,KAMtClB,EAAQyB,YAAY,GAAGL,GAAG,cAAe,SAASM,GACjD,GAAIC,GAAQD,EAAcJ,KAC1BjD,GAAMgB,QAAQ,SAASC,EAAML,GACxBK,IAASqC,EAAM/C,OAClBZ,EAAK4D,yBAAyB3C,EAAO0C,KAIvC1D,EAAE,SAAW0D,EAAM9C,MAAMgD,YAAY,eACrCC,WAAW,WACV7D,EAAE,SAAW0D,EAAM9C,MAAMkD,SAAS,gBAChC,KAIJ,IAAIlD,EACJ+B,GAAKoB,OAAO,SAASC,GACpB,GAAIA,EAAU,CACb,GAAIC,GAAMD,EAASC,GACnBC,SAAQC,IAAI,+BAAgCF,GAC5CtB,EAAKE,MAAM,SAAWoB,GAAKd,GAAG,QAAS,SAASzB,GAC/Cd,EAAOc,EAAK2B,MACZrD,EAAE,sBAAsB4D,YAAY,UACpC5D,EAAE,YAAY8D,SAAS,UACvB9D,EAAE,SAASqB,KAAKT,EAGhB,IAAIwD,GAAWzB,EAAKE,MAAM,mBACtBwB,EAAUzB,EAAKC,MAAM,YAAcjC,EACvCwD,GAASjB,GAAG,QAAS,SAASmB,GACzBA,EAASjB,QACZgB,EAAQE,eAAeC,SACvBH,EAAQlE,KAAI,YAKfH,GAAE,YAAY4D,YAAY,UAC1B5D,EAAE,eAAeyE,QACjBzE,EAAE,8BAA8B8D,SAAS,UACzC9D,EAAE,gBAAgB8D,SAAS,YAG7Bd,EAASG,GAAG,QAAS,SAASzB,GACzBA,GACH3B,EAAK2E,cAAchD,EAAK2B,QAS1B,IAAIsB,GAAQC,GAAGC,UACdnD,MACCoD,EAAG,IACHC,UACE,MAEFC,KAAM,eAEPC,MACCC,GACCC,QAAS,GAEVL,GACCM,MACCC,OAAQ,SAASP,GAChB,GAAI7C,GAAW,IAAJ6C,EACPQ,EAAO,GAAIC,MAAKtD,EACpB,OAAOpC,GAAO2F,QAAQF,EAAKG,YAAc,IAAM5F,EAAO2F,QAAQF,EAAKI,kBAKvEC,YACCC,SAAU,OAIRC,KACAC,KACAC,KACA7E,KACA8E,EAAW,EAEfjE,GAAQoB,GAAG,cAAe,SAASM,GAClC,GAAIC,GAAQD,EAAcJ,KAC1ByC,GAAM9D,KAAK0B,EAEX,IAAIuC,GAAYvC,EAAM9C,KAClBsF,EAAOhF,EAAU+E,EAChBC,KACJA,GACCC,GAAI,EACJC,KAAM,EACNC,MAAO,EACPC,MAAO,EACPC,WAAY,GAEbrF,EAAU+E,GAAaC,GAExBA,EAAKG,QACD3C,EAAMnC,UAAY,GACrB2E,EAAKE,OACD1C,EAAM1C,OAAS0C,EAAM/B,SACxBuE,EAAKK,aAELL,EAAKI,UAGNJ,EAAKC,KACDzC,EAAM1C,OAAS0C,EAAM/B,SACxBuE,EAAKK,aAELL,EAAKI,UAKR,IAAI/F,KACHzB,GAAI,SACJmC,GAAI,SAASiF,GACZ,MAAOA,GAAKG,SAGbvH,GAAI,KACJmC,GAAI,SAASiF,GACZ,MAAiB,KAAVA,EAAKC,GAAWD,EAAKG,SAG7BvH,GAAI,MACJmC,GAAI,SAASiF,GACZ,MAAoB,KAAbA,EAAKI,MAAcJ,EAAKG,QA6CjCG,aAAY,WACX,GAAIvE,GAAOwE,KAAKC,MAAMnB,KAAKoB,MAAQ,KAC/BC,IAGJ,KAAKf,EAAMgB,OACV,IAAK,GAAIC,GAAI,EAAOd,EAAJc,EAAcA,IAC7BjB,EAAMkB,QAAQ9E,EAAO6E,EAKvB,IAAI9F,GAAQ6E,EAAMhE,QAAQI,EAmC1B,IAlCc,KAAVjB,IACH6E,EAAM7D,KAAKC,GACX4D,EAAMmB,QACNvH,OAAOwH,KAAKlB,GAAO3E,QAAQ,SAAC5B,GAC3B,GAAIc,GAAQyF,EAAMvG,EAClBc,GAAM0B,KAAK,GACX1B,EAAM0G,WAKRlB,EAAM1E,QAAQ,SAASsC,GACtB,GAAIwD,GAAYT,KAAKC,MAAMhD,EAAMzB,KAAO,KACpCgE,EAAYvC,EAAM9C,KAClBuG,EAAWtB,EAAMA,EAAMgB,OAAS,GAChCO,EAAYvB,EAAMhE,QAAQqF,EAE9B,IAAkB,KAAdE,GAAoBnF,EAAOkF,EAE9B,WADAP,GAAU5E,KAAK0B,EAGhB,IAAIpD,GAAQyF,EAAME,EACb3F,KACJA,EAAQuF,EAAMrF,IAAI,WACjB,MAAO,KAERuF,EAAME,GAAa3F,EAEpB,IAAIK,GAAQL,EAAM8G,EAClB9G,GAAM8G,GAAczG,EAAYA,EAAQ,EAAZ,IAE7BmF,EAAQc,GAGH1D,EACJ,OAAO,CAIR,IAAI6B,KACF,KAAKsC,OAAOxB,GAEd,KAAK,GAAIK,KAAQH,GAChBhB,EAAQ/C,MAAMkE,GAAMmB,OAAOtB,EAAMG,IAElCvB,GAAM2C,MACLvC,QAASA,IAGV1E,KACE,KASHL,EAAE,cAAcmD,GAAG,QAAS,WAI3B,MAHAnD,GAAE,gBAAgBuH,YAAY,UAC9BvH,EAAE,SAASuH,YAAY,SACvBvH,EAAE,uBAAuByE,SAClB,IAERzE,EAAE,cAAcmD,GAAG,SAAU,WAC5B,GAAIqE,GAAQxH,EAAE,uBACVW,EAAQ6G,EAAMnE,KAMlB,OALI1C,KACHP,EAAM4B,KAAKrB,GACX6G,EAAMnE,IAAI,IACVpD,MAEM,IAERD,EAAE,oBAAoBmD,GAAG,SAAU,WAClC,GAAIqE,GAAQxH,EAAE,4BACVW,EAAQ8G,SAASD,EAAMnE,MAAO,GAKlC,OAJKqE,OAAM/G,KACVoC,EAAU5C,IAAIQ,GACd6G,EAAMnE,IAAI,MAEJ,IAERrD,EAAE,kBAAkBmD,GAAG,QAAS,WAE/B,MADAL,GAAU3C,IAAIC,IACP,IAIRJ,EAAE,2BAA2BmD,GAAG,QAAS,WACxC,GAAIwE,GAAUC,KAAKC,WAClBC,IAAKlG,EACLxB,MAAOA,EACP2C,UAAWE,GAKZ,OAHApD,GAAOkI,eAAe,GAAIC,OAAML,IAC/B3C,KAAM,qBACH,iBACG,IAERhF,EAAE,QACAmD,GAAG,WAAY,SAASO,GACxB,GAAIuE,GAAgBvE,EAAMuE,aAE1B,OADAA,GAAcC,aAAaC,WAAa,QACjC,IAEPhF,GAAG,OAAQ,SAASO,GACpB,GAAIuE,GAAgBvE,EAAMuE,cACtBG,EAAOH,EAAcC,aAAaG,MAAM,GACxCC,EAAS,GAAIC,WAgBjB,OAfAD,GAAOE,OAAS,SAASC,GACxB,GAAI/G,GAAO,IACX,KACCA,EAAOkG,KAAKc,MAAMD,EAAEE,OAAOC,QAC1B,MAAOC,GACR,OAEGnH,IACHqB,EAAU5C,IAAIuB,EAAKqB,WACnBD,EAAU3C,IAAIuB,EAAKoG,KACnB1H,EAAQsB,EAAKtB,MACbH,MAGFqI,EAAOQ,WAAWV,IACX,IAgCTpI,EAAE,kBACAmD,GAAG,QAAS,mBAAoB7B,EAAK,KACrC6B,GAAG,QAAS,qBAAsB7B,EAAK,IACvC6B,GAAG,QAAS,uBAAwB,WACpC,GAAInC,GAAQhB,EAAEwB,MAAMC,QAAQ,iBAAiBC,KAAK,QAGlD,OAFAtB,GAAM2I,OAAO/H,EAAO,GACpBf,KACO,IAEPkD,GAAG,YAAa,gBAAiB,SAASO,GAC1C,IAAK1D,EAAE,SAASgJ,SAAS,SACxB,OAAO,CAER,IAAIf,GAAgBvE,EAAMuE,cACtBT,EAAQxH,EAAEwB,KACdgG,GAAM1D,SAAS,yBACfmE,EAAcC,aAAae,cAAgB,OAC3ChB,EAAcC,aAAagB,QAAQ,mBAAoBtB,KAAKC,WAC3D7G,MAAOwG,EAAM9F,KAAK,SAClByH,KAAM3B,EAAM4B,KAAK,sBAAsB/H,UAIxCwC,WAAW,WACV7D,EAAE,4DAA4D8D,SAAS,6BACrE,OAEHX,GAAG,YAAa,gBAAiB,WACjC,GAAIkG,GAAQrJ,EAAEwB,KACV6H,GAAML,SAAS,6BAClBhJ,EAAEwB,MAAMsC,SAAS,oCAGlBX,GAAG,WAAY,gBAAiB,SAASO,GACzC,GAAIuE,GAAgBvE,EAAMuE,aAE1B,OADAA,GAAcC,aAAaC,WAAa,QACjC,IAEPhF,GAAG,YAAa,gBAAiB,SAASO,GAC1CA,EAAM4F,iBACN5F,EAAM6F,iBACN,IAAIF,GAAQrJ,EAAEwB,KACd6H,GAAMzF,YAAY,oCAGlBT,GAAG,UAAW,gBAAiB,WAC/BnD,EAAEwB,MAAMoC,YAAY,yBACpB5D,EAAE,gCAAgC4D,YAAY,4BAC5CA,YAAY,oCAEdT,GAAG,OAAQ,gBAAiB,SAASO,GACrC,GAAIuE,GAAgBvE,EAAMuE,cACtBuB,EAAcxJ,EAAEwB,MAAME,KAAK,SAC3B+H,EAAc7B,KAAKc,MAAMT,EAAcC,aAAawB,QAAQ,qBAAqB1I,KAEjE,KAAhBwI,GAAsBA,IACzBA,EAAcpJ,EAAMyG,QAGH2C,EAAdC,GACHD,GAED,IAAIL,GAAO/I,EAAM2I,OAAOU,EAAa,EAGrC,OAFArJ,GAAM2I,OAAOS,EAAa,EAAGL,GAC7BlJ,KACO,IAITD,EAAE,iBAAiBmD,GAAG,SAAU,SAASO,GAExCA,EAAM4F,iBAENtJ,EAAEwB,MAAMmI,OACR3J,EAAE,sBAAsB4D,YAAY,SACpC,IAAIgG,GAAQ5J,EAAE,eAAeqD,KAE7BV,GAAKkH,gBAAgB,SAASC,EAAO9F,GACpC,GAAI8F,EAEH,WADA5F,SAAQC,IAAI,yBAA0B2F,EAGvC,IAAI7F,GAAMD,EAASC,GACnBtB,GAAKE,MAAM,SAAWoB,GAAK9D,IAAIyJ,GAC/B5J,EAAE,YAAY2J,OACd3J,EAAE,iBAAiB+J,OACnB/J,EAAE,YAAY8D,SAAS,UACvB9D,EAAE,sBAAsB8D,SAAS,cAGnC9D,EAAE,eAAemD,GAAG,QAAS,WAE5B,MADAR,GAAKqH,UACE,IAGRhK,EAAE,gCAAgCmD,GAAG,QAAS,WAS7C,MARAnD,GAAE,iBAAiBuH,YAAY,UAC/BrE,GAAgBA,EACZ7C,IACHA,IACIL,EAAE,SAASgJ,SAAS,UACvBhJ,EAAE,cAAciK,QAAQ,WAGnB,IAERjK,EAAE,eAAemD,GAAG,QAAS,WAC5BnD,EAAE,qBAAqBuH,YAAY,kBF2C/B,SAAS1I,EAAQD,GAEtB,YG3iBM,SAAS4G,GAAQ0E,GACpB,MAAa,IAANA,EAAW,IAAMA,EAAM,GAAKA,EAIhC,QAASnC,GAAeJ,EAASwC,GACpC,GAAIC,GAAS9H,OAAO8H,QAAWC,UAAUC,YAAcD,UAAUC,WAAWC,KAAKF,UACjF,IAAID,EACAA,EAAOzC,EAASwC,OACb,CACH,GAAIK,GAAeC,SAASC,cAAc,KACtCC,EAAOrI,OAAOsI,IAAIC,gBAAgBlD,EACtC6C,GAAaM,aAAa,OAAQH,GAClCH,EAAaM,aAAa,WAAYX,GACtCM,SAASM,KAAKC,YAAYR,GAC1BA,EAAaS,QACbR,SAASM,KAAKG,YAAYV,IH6hBjC/K,OAAO0L,eAAevM,EAAS,cAC3B+B,OAAO,IAEX/B,EAAQ4G,QAAUA,EAClB5G,EAAQmJ,eAAiBA,GAyBpB,SAASlJ,EAAQD,GAItB,YI5kBM,SAAS8L,GAAcrJ,EAAML,EAAOqF,EAAO+E,EAASC,EAAaC,GACpE,GAAIC,IACA,sCAAwCD,EAAc,yBAA2B,IAAM,KACrFD,EAAkD,GAApC,oBAAsBrK,EAAQ,KAAY,sBAC1D,QASJ,IANKqK,GACDE,EAAOvJ,KAAK,2EAGhBuJ,EAAOvJ,KAAK,4CAEPqJ,EAAa,CACd,GAAIG,GAAYnF,GAASA,EAAQ,IAAMrF,CACvCuK,GAASA,EAAOlE,QACZ,uCACAmE,EAAY,yCAA2C,GACvDA,EAAY,0EAA4E,GACxFA,EAAY,OAAS,GACrBxK,EAAQ,uCAAyC,GACjDA,EAAQ,wEAA0E,GAClFA,EAAQ,OAAS,GACjB,2CACA,qEACA,SAIRuK,EAAOvJ,KAAK,eAEZ,IAAIyJ,GAAWzL,EAAEuL,EAAOG,KAAK,IAO7B,OANAD,GAAS/J,KAAK,QAASV,GACvByK,EAASrC,KAAK,sBAAsB/H,KAAKA,GACzCoK,EAASE,KAAK,QAAStK,GACnB+J,GACAK,EAAS3H,SAAS,oBAEf2H,EAMJ,QAASnI,GAAclD,EAAO6C,GACjC,GAAI2I,GAAoB5L,EAAE,kBACtB6L,KACAC,EAAU1L,EAAMyG,MACpB+E,GAAkBG,KAAK,IACnBD,GACA9L,EAAE,uBAAuB8D,SAAS,UAClC1D,EAAMgB,QAAQ,SAASC,EAAML,GACrBiC,GAAkBjC,IAAUiC,GAC5B2I,EAAkBI,OAAOC,GAE7BL,EAAkBI,OAAOtB,EAAcrJ,EAAML,EAAO8K,EAASI,EAAUlL,KAAWK,GAAM,EAAOL,GAASiC,IACxG4I,EAAa7K,GAASK,IAG1BuK,EAAkBI,OAAO,8CAEzBhM,EAAE,uBAAuB4D,YAAY,UAGzCsI,EAAYL,EAGT,QAAStI,GAAgB3B,EAAgBqB,GAC5C,GAAI2I,GAAoB5L,EAAE,mBAC1B4L,GAAkBG,KAAK,IACvBnK,EAAeR,QAAQ,SAASC,EAAML,GAC9BiC,GAAkBjC,IAAUiC,GAC5B2I,EAAkBI,OAAOC,GAE7BL,EAAkBI,OAAOtB,EAAcrJ,EAAML,EAAO,MAAM,GAAM,EAAMA,GAASiC,MAIhF,QAASyB,GAAcyH,GAC1B,GAAIC,GAAUpM,EAAE,UAChBoM,GAAQL,KAAK,GACb,KAAK,GAAIvM,KAAO2M,GACRA,EAAO3M,IACP4M,EAAQJ,OAAM,gBAAiBxM,EAAG,KAAKA,EAAG,SAK/C,QAASmE,GAAyB3C,EAAO0C,GAC5C,GAAI8D,GAAQxH,EAAE,iBAAmBgB,EAAQ,SACzCwG,GAAM5D,YAAY,kDAClB5D,EAAE,kBAAmBwH,GAChBnG,KAAKqC,EAAM9C,MACXgD,YAAY,sBACjBC,WAAW,WACP2D,EAAM1D,SAAS,uBAAyBJ,EAAMnC,UAAY,EAAI,KAAO,SACrEvB,EAAE,kBAAmBwH,GAChB1D,SAAS,uBACf,IJ4eNrE,OAAO0L,eAAevM,EAAS,cAC3B+B,OAAO,IAEX/B,EAAQ8L,cAAgBA,EACxB9L,EAAQ0E,cAAgBA,EACxB1E,EAAQ2E,gBAAkBA,EAC1B3E,EAAQ8F,cAAgBA,EACxB9F,EAAQ+E,yBAA2BA,CI5iBpC,IAAIuI,MACAD,EAAkB","file":"roadmap.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*global $ Firebase c3:true*/\n\t'use strict';\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\t\n\tvar _helper = __webpack_require__(1);\n\t\n\tvar helper = _interopRequireWildcard(_helper);\n\t\n\tvar _view = __webpack_require__(2);\n\t\n\tvar view = _interopRequireWildcard(_view);\n\t\n\t$(function () {\n\t\n\t\tvar hash = 'room_' + window.location.hash.replace(/[\\#\\.\\[\\]\\$]/g, '');\n\t\t// DEV - PROD switch\n\t\tvar baseDomain = window.location.host.indexOf('localhost') !== -1 ? 'roadmap2' : 'amber-torch-7267';\n\t\n\t\tvar base = new Firebase('https://' + baseDomain + '.firebaseio.com/');\n\t\tvar room = base.child(hash);\n\t\tvar roadmap = room.child('roadmap');\n\t\tvar reference = room.child('reference');\n\t\tvar threshold = room.child('threshold');\n\t\tvar history = room.child('history');\n\t\tvar presence = room.child('presence');\n\t\n\t\t/**\n\t  *\n\t  * SHARED VARS\n\t  *\n\t  */\n\t\n\t\tvar store = [];\n\t\tvar storeReference = [];\n\t\tvar thresholdValue = 0;\n\t\tvar showingStats = false;\n\t\n\t\t/**\n\t  *\n\t  * FUNCTIONAL\n\t  *\n\t  */\n\t\n\t\troadmap.on('value', function (newStoreResp) {\n\t\t\tstore = newStoreResp.val() || [];\n\t\t\tview.renderRoadmap(store, thresholdValue);\n\t\t});\n\t\treference.on('value', function (data) {\n\t\t\tstoreReference = data.val() || [];\n\t\t\tview.renderReference(storeReference, thresholdValue);\n\t\t});\n\t\tthreshold.on('value', function (data) {\n\t\t\tthresholdValue = data.val();\n\t\t\tview.renderRoadmap(store, thresholdValue);\n\t\t\tview.renderReference(storeReference, thresholdValue);\n\t\t});\n\t\n\t\tfunction broadcast() {\n\t\t\troadmap.set(store);\n\t\t}\n\t\thistory.limitToLast(1).on('child_added', function (childSnapshot) {\n\t\t\tvar event = childSnapshot.val();\n\t\t\tstore.forEach(function (text, index) {\n\t\t\t\tif (text === event.value) {\n\t\t\t\t\tview.renderActionNotification(index, event);\n\t\t\t\t}\n\t\t\t});\n\t\t\t// active user tracking\n\t\t\t$('#user_' + event.visa).removeClass('user-active');\n\t\t\tsetTimeout(function () {\n\t\t\t\t$('#user_' + event.visa).addClass('user-active');\n\t\t\t}, 10);\n\t\t});\n\t\n\t\t// login & presence\n\t\tvar visa;\n\t\tbase.onAuth(function (authData) {\n\t\t\tif (authData) {\n\t\t\t\tvar uid = authData.uid;\n\t\t\t\tconsole.log('Authenticated user with uid:', uid);\n\t\t\t\tbase.child('users/' + uid).on('value', function (data) {\n\t\t\t\t\tvisa = data.val();\n\t\t\t\t\t$('#main, nav, footer').removeClass('hidden');\n\t\t\t\t\t$('#welcome').addClass('hidden');\n\t\t\t\t\t$('#visa').text(visa);\n\t\n\t\t\t\t\t//  online status\n\t\t\t\t\tvar amOnline = base.child('.info/connected');\n\t\t\t\t\tvar userRef = room.child('presence/' + visa);\n\t\t\t\t\tamOnline.on('value', function (snapshot) {\n\t\t\t\t\t\tif (snapshot.val()) {\n\t\t\t\t\t\t\tuserRef.onDisconnect().remove();\n\t\t\t\t\t\t\tuserRef.set(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t$('#welcome').removeClass('hidden');\n\t\t\t\t$('#visa_input').focus();\n\t\t\t\t$('#main, #stats, nav, footer').addClass('hidden');\n\t\t\t\t$('#admin_block').addClass('hidden');\n\t\t\t}\n\t\t});\n\t\tpresence.on('value', function (data) {\n\t\t\tif (data) {\n\t\t\t\tview.displayOnline(data.val());\n\t\t\t}\n\t\t});\n\t\n\t\t/**\n\t  *\n\t  * CHARTING\n\t  *\n\t  */\n\t\tvar chart = c3.generate({\n\t\t\tdata: {\n\t\t\t\tx: 'x',\n\t\t\t\tcolumns: [['x']],\n\t\t\t\ttype: 'area-spline'\n\t\t\t},\n\t\t\taxis: {\n\t\t\t\ty: {\n\t\t\t\t\tpadding: 0\n\t\t\t\t},\n\t\t\t\tx: {\n\t\t\t\t\ttick: {\n\t\t\t\t\t\tformat: function format(x) {\n\t\t\t\t\t\t\tvar time = x * 10000;\n\t\t\t\t\t\t\tvar date = new Date(time);\n\t\t\t\t\t\t\treturn helper.format2(date.getHours()) + ':' + helper.format2(date.getMinutes());\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\ttransition: {\n\t\t\t\tduration: 100\n\t\t\t}\n\t\t});\n\t\n\t\tvar times = [];\n\t\tvar saved = [];\n\t\tvar users = {};\n\t\tvar userStats = {};\n\t\tvar nbPoints = 60;\n\t\n\t\thistory.on('child_added', function (childSnapshot) {\n\t\t\tvar event = childSnapshot.val();\n\t\t\tsaved.push(event);\n\t\t\t// update user stats\n\t\t\tvar eventVisa = event.visa;\n\t\t\tvar user = userStats[eventVisa];\n\t\t\tif (!user) {\n\t\t\t\tuser = {\n\t\t\t\t\tup: 0,\n\t\t\t\t\tdown: 0,\n\t\t\t\t\ttotal: 0,\n\t\t\t\t\ttoRef: 0,\n\t\t\t\t\tagainstRef: 0\n\t\t\t\t};\n\t\t\t\tuserStats[eventVisa] = user;\n\t\t\t}\n\t\t\tuser.total++;\n\t\t\tif (event.direction > 0) {\n\t\t\t\tuser.down++;\n\t\t\t\tif (event.index >= event.refIndex) {\n\t\t\t\t\tuser.againstRef++;\n\t\t\t\t} else {\n\t\t\t\t\tuser.toRef++;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tuser.up++;\n\t\t\t\tif (event.index <= event.refIndex) {\n\t\t\t\t\tuser.againstRef++;\n\t\t\t\t} else {\n\t\t\t\t\tuser.toRef++;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t// running\n\t\tvar statRules = [{\n\t\t\tid: 'active',\n\t\t\tfn: function fn(user) {\n\t\t\t\treturn user.total;\n\t\t\t}\n\t\t}, {\n\t\t\tid: 'up',\n\t\t\tfn: function fn(user) {\n\t\t\t\treturn user.up * 100 / user.total;\n\t\t\t}\n\t\t}, {\n\t\t\tid: 'ref',\n\t\t\tfn: function fn(user) {\n\t\t\t\treturn user.toRef * 100 / user.total;\n\t\t\t}\n\t\t}];\n\t\n\t\tfunction showStats() {\n\t\t\tvar stats = statRules.map(function (rule) {\n\t\t\t\treturn {\n\t\t\t\t\tid: rule.id,\n\t\t\t\t\tmost: {\n\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\tvisa: '???'\n\t\t\t\t\t},\n\t\t\t\t\tless: {\n\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\tvisa: '???'\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t});\n\t\t\t// compute results\n\t\t\tvar handleRule = function handleRule(userVisa) {\n\t\t\t\treturn function (rule, index) {\n\t\t\t\t\tvar value = rule.fn(userStats[userVisa]);\n\t\t\t\t\tvar stat = stats[index];\n\t\t\t\t\tvar most = stat.most;\n\t\t\t\t\tvar less = stat.less;\n\t\t\t\t\tif (most.value === null || value >= most.value) {\n\t\t\t\t\t\tmost.value = value;\n\t\t\t\t\t\tmost.userVisa = userVisa;\n\t\t\t\t\t}\n\t\t\t\t\tif (less.value === null || value < less.value) {\n\t\t\t\t\t\tless.value = value;\n\t\t\t\t\t\tless.userVisa = userVisa;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t\tfor (var userVisa in userStats) {\n\t\t\t\tstatRules.forEach(handleRule(userVisa));\n\t\t\t}\n\t\t\t// display results\n\t\t\tstats.forEach(function (stat) {\n\t\t\t\t$('#stats_most_' + stat.id + ' .stats-card-visa').text(stat.most.visa);\n\t\t\t\t$('#stats_less_' + stat.id + ' .stats-card-visa').text(stat.less.visa);\n\t\t\t});\n\t\t}\n\t\n\t\tsetInterval(function () {\n\t\t\tvar time = Math.floor(Date.now() / 10000);\n\t\t\tvar remaining = [];\n\t\n\t\t\t// initial build\n\t\t\tif (!times.length) {\n\t\t\t\tfor (var i = 0; i < nbPoints; i++) {\n\t\t\t\t\ttimes.unshift(time - i);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t// build new time\n\t\t\tvar index = times.indexOf(time);\n\t\t\tif (index === -1) {\n\t\t\t\ttimes.push(time);\n\t\t\t\ttimes.shift();\n\t\t\t\tObject.keys(users).forEach(function (key) {\n\t\t\t\t\tvar stats = users[key];\n\t\t\t\t\tstats.push(0);\n\t\t\t\t\tstats.shift();\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\t// reintegrate values\n\t\t\tsaved.forEach(function (event) {\n\t\t\t\tvar eventTime = Math.floor(event.time / 10000);\n\t\t\t\tvar eventVisa = event.visa;\n\t\t\t\tvar lastTime = times[times.length - 1];\n\t\t\t\tvar timeIndex = times.indexOf(eventTime);\n\t\t\t\t// save this for later\n\t\t\t\tif (timeIndex === -1 && time > lastTime) {\n\t\t\t\t\tremaining.push(event);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar stats = users[eventVisa];\n\t\t\t\tif (!stats) {\n\t\t\t\t\tstats = times.map(function () {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t\t\tusers[eventVisa] = stats;\n\t\t\t\t}\n\t\t\t\tvar value = stats[timeIndex];\n\t\t\t\tstats[timeIndex] = !value ? 1 : value + 1;\n\t\t\t});\n\t\t\tsaved = remaining;\n\t\n\t\t\t// dont process if not showing\n\t\t\tif (!showingStats) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// propagate to chart\n\t\t\tvar columns = [['x'].concat(times)];\n\t\t\tfor (var user in users) {\n\t\t\t\tcolumns.push([user].concat(users[user]));\n\t\t\t}\n\t\t\tchart.load({\n\t\t\t\tcolumns: columns\n\t\t\t});\n\t\t\t// update stats as well\n\t\t\tshowStats();\n\t\t}, 2000);\n\t\n\t\t/**\n\t  *\n\t  * DOM HANDLERS\n\t  *\n\t  */\n\t\n\t\t// roadmap handlers\n\t\t$('#nav_admin').on('click', function () {\n\t\t\t$('#admin_block').toggleClass('hidden');\n\t\t\t$('#main').toggleClass('admin');\n\t\t\t$('#admin_roadmap_item').focus();\n\t\t\treturn false;\n\t\t});\n\t\t$('#admin_add').on('submit', function () {\n\t\t\tvar $item = $('#admin_roadmap_item');\n\t\t\tvar value = $item.val();\n\t\t\tif (value) {\n\t\t\t\tstore.push(value);\n\t\t\t\t$item.val('');\n\t\t\t\tbroadcast();\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\t$('#admin_threshold').on('submit', function () {\n\t\t\tvar $item = $('#admin_roadmap_threshold');\n\t\t\tvar value = parseInt($item.val(), 10);\n\t\t\tif (!isNaN(value)) {\n\t\t\t\tthreshold.set(value);\n\t\t\t\t$item.val('');\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\t$('#nav_reference').on('click', function () {\n\t\t\treference.set(store);\n\t\t\treturn false;\n\t\t});\n\t\n\t\t// upload / download\n\t\t$('#roadmap_items_download').on('click', function () {\n\t\t\tvar content = JSON.stringify({\n\t\t\t\tref: storeReference,\n\t\t\t\tstore: store,\n\t\t\t\tthreshold: thresholdValue\n\t\t\t});\n\t\t\thelper.downloadAsFile(new Blob([content], {\n\t\t\t\ttype: 'application/json'\n\t\t\t}), 'roadmap.json');\n\t\t\treturn false;\n\t\t});\n\t\t$('body').on('dragover', function (event) {\n\t\t\tvar originalEvent = event.originalEvent;\n\t\t\toriginalEvent.dataTransfer.dropEffect = 'copy';\n\t\t\treturn false;\n\t\t}).on('drop', function (event) {\n\t\t\tvar originalEvent = event.originalEvent;\n\t\t\tvar file = originalEvent.dataTransfer.files[0];\n\t\t\tvar reader = new FileReader();\n\t\t\treader.onload = function (e) {\n\t\t\t\tvar data = null;\n\t\t\t\ttry {\n\t\t\t\t\tdata = JSON.parse(e.target.result);\n\t\t\t\t} catch (X_x) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (data) {\n\t\t\t\t\tthreshold.set(data.threshold);\n\t\t\t\t\treference.set(data.ref);\n\t\t\t\t\tstore = data.store;\n\t\t\t\t\tbroadcast();\n\t\t\t\t}\n\t\t\t};\n\t\t\treader.readAsText(file);\n\t\t\treturn false;\n\t\t});\n\t\n\t\t// items handlers\n\t\tfunction swap(direction) {\n\t\t\treturn function () {\n\t\t\t\tvar index = $(this).parents('.roadmap-item').data('index');\n\t\t\t\tif (index === null) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t// swap values\n\t\t\t\tvar value = store[index];\n\t\t\t\tstore[index] = store[index + direction];\n\t\t\t\tstore[index + direction] = value;\n\t\t\t\tbroadcast();\n\t\t\t\t// also save changed\n\t\t\t\tif (visa) {\n\t\t\t\t\tvar refIndex = storeReference.indexOf(value);\n\t\t\t\t\tvar historyRef = history.push();\n\t\t\t\t\thistoryRef.set({\n\t\t\t\t\t\tvisa: visa,\n\t\t\t\t\t\tindex: index,\n\t\t\t\t\t\trefIndex: refIndex,\n\t\t\t\t\t\tvalue: value,\n\t\t\t\t\t\ttime: Firebase.ServerValue.TIMESTAMP,\n\t\t\t\t\t\tdirection: direction\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\t\t}\n\t\n\t\t$('#roadmap_items').on('click', '.roadmap-item-up', swap(-1)).on('click', '.roadmap-item-down', swap(1)).on('click', '.roadmap-item-delete', function () {\n\t\t\tvar index = $(this).parents('.roadmap-item').data('index');\n\t\t\tstore.splice(index, 1);\n\t\t\tbroadcast();\n\t\t\treturn false;\n\t\t}).on('dragstart', '.roadmap-item', function (event) {\n\t\t\tif (!$('#main').hasClass('admin')) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar originalEvent = event.originalEvent;\n\t\t\tvar $item = $(this);\n\t\t\t$item.addClass('roadmap-item-dragging');\n\t\t\toriginalEvent.dataTransfer.effectAllowed = 'move';\n\t\t\toriginalEvent.dataTransfer.setData('application/json', JSON.stringify({\n\t\t\t\tindex: $item.data('index'),\n\t\t\t\titem: $item.find('.roadmap-item-name').text()\n\t\t\t}));\n\t\t\t// delay target placeholder display, otherwise stops the drag because\n\t\t\t// of the next element\n\t\t\tsetTimeout(function () {\n\t\t\t\t$('#roadmap_items .roadmap-item:not(.roadmap-item-dragging)').addClass('roadmap-item-drop-target');\n\t\t\t}, 100);\n\t\t}).on('dragenter', '.roadmap-item', function () {\n\t\t\tvar $this = $(this);\n\t\t\tif ($this.hasClass('roadmap-item-drop-target')) {\n\t\t\t\t$(this).addClass('roadmap-item-drop-target-enter');\n\t\t\t}\n\t\t}).on('dragover', '.roadmap-item', function (event) {\n\t\t\tvar originalEvent = event.originalEvent;\n\t\t\toriginalEvent.dataTransfer.dropEffect = 'move';\n\t\t\treturn false;\n\t\t}).on('dragleave', '.roadmap-item', function (event) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tvar $this = $(this);\n\t\t\t$this.removeClass('roadmap-item-drop-target-enter');\n\t\t}).on('dragend', '.roadmap-item', function () {\n\t\t\t$(this).removeClass('roadmap-item-dragging');\n\t\t\t$('#roadmap_items .roadmap-item').removeClass('roadmap-item-drop-target').removeClass('roadmap-item-drop-target-enter');\n\t\t}).on('drop', '.roadmap-item', function (event) {\n\t\t\tvar originalEvent = event.originalEvent;\n\t\t\tvar targetIndex = $(this).data('index');\n\t\t\tvar originIndex = JSON.parse(originalEvent.dataTransfer.getData('application/json')).index;\n\t\t\t// no index : push at the end\n\t\t\tif (targetIndex !== 0 && !targetIndex) {\n\t\t\t\ttargetIndex = store.length;\n\t\t\t}\n\t\t\t// removing will shift the index\n\t\t\tif (originIndex < targetIndex) {\n\t\t\t\ttargetIndex--;\n\t\t\t}\n\t\t\tvar item = store.splice(originIndex, 1);\n\t\t\tstore.splice(targetIndex, 0, item);\n\t\t\tbroadcast();\n\t\t\treturn false;\n\t\t});\n\t\n\t\t// login handlers\n\t\t$('#welcome form').on('submit', function (event) {\n\t\n\t\t\tevent.preventDefault();\n\t\t\t// toggle display\n\t\t\t$(this).hide();\n\t\t\t$('#welcome .progress').removeClass('hidden');\n\t\t\tvar login = $('#visa_input').val();\n\t\n\t\t\tbase.authAnonymously(function (error, authData) {\n\t\t\t\tif (error) {\n\t\t\t\t\tconsole.log('Authentication Failed!', error);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar uid = authData.uid;\n\t\t\t\tbase.child('users/' + uid).set(login);\n\t\t\t\t$('#welcome').hide();\n\t\t\t\t$('#welcome form').show();\n\t\t\t\t$('#welcome').addClass('hidden');\n\t\t\t\t$('#welcome .progress').addClass('hidden');\n\t\t\t});\n\t\t});\n\t\t$('#nav_logout').on('click', function () {\n\t\t\tbase.unauth();\n\t\t\treturn false;\n\t\t});\n\t\n\t\t$('#nav_stats, #stats h2 .close').on('click', function () {\n\t\t\t$('#stats, #main').toggleClass('hidden');\n\t\t\tshowingStats = !showingStats;\n\t\t\tif (showStats) {\n\t\t\t\tshowStats();\n\t\t\t\tif ($('#main').hasClass('admin')) {\n\t\t\t\t\t$('#nav_admin').trigger('click');\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\t$('#nav_toggle').on('click', function () {\n\t\t\t$('nav .navbar-right').toggleClass('hidden-xs');\n\t\t});\n\t});\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\texports.format2 = format2;\n\texports.downloadAsFile = downloadAsFile;\n\t\n\tfunction format2(int) {\n\t    return int < 10 ? '0' + int : '' + int;\n\t}\n\t\n\t// stolen from piskel\n\t\n\tfunction downloadAsFile(content, filename) {\n\t    var saveAs = window.saveAs || navigator.msSaveBlob && navigator.msSaveBlob.bind(navigator);\n\t    if (saveAs) {\n\t        saveAs(content, filename);\n\t    } else {\n\t        var downloadLink = document.createElement('a');\n\t        var href = window.URL.createObjectURL(content);\n\t        downloadLink.setAttribute('href', href);\n\t        downloadLink.setAttribute('download', filename);\n\t        document.body.appendChild(downloadLink);\n\t        downloadLink.click();\n\t        document.body.removeChild(downloadLink);\n\t    }\n\t}\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t/*global $:true*/\n\t\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\texports.createElement = createElement;\n\texports.renderRoadmap = renderRoadmap;\n\texports.renderReference = renderReference;\n\texports.displayOnline = displayOnline;\n\texports.renderActionNotification = renderActionNotification;\n\t\n\tfunction createElement(text, index, total, changed, isReference, isCandidate) {\n\t    var markup = ['<div class=\"roadmap-item clearfix ' + (isCandidate ? 'roadmap-item-candidate' : '') + '\"' + (!isReference ? 'id=\"roadmap_item_' + index + '\"' : '') + '  draggable=\"true\">', '<div>'];\n\t\n\t    if (!isReference) {\n\t        markup.push('<span class=\"roadmap-item-grab-handle glyphicon glyphicon-move\"></span>');\n\t    }\n\t\n\t    markup.push('<span class=\"roadmap-item-name\"></span>');\n\t\n\t    if (!isReference) {\n\t        var isNotLast = total && total - 1 !== index;\n\t        markup = markup.concat(['<span class=\"roadmap-author\"></span>', isNotLast ? '<a href=\"#\" class=\"roadmap-item-down\">' : '', isNotLast ? '<span class=\"glyphicon glyphicon-arrow-down\" aria-hidden=\"true\"></span>' : '', isNotLast ? '</a>' : '', index ? '<a href=\"#\" class=\"roadmap-item-up\">' : '', index ? '<span class=\"glyphicon glyphicon-arrow-up\" aria-hidden=\"true\"></span>' : '', index ? '</a>' : '', '<a href=\"#\" class=\"roadmap-item-delete\">', '<span class=\"glyphicon glyphicon-trash\" aria-hidden=\"true\"></span>', '</a>']);\n\t    }\n\t\n\t    markup.push('</div></div>');\n\t\n\t    var $element = $(markup.join(''));\n\t    $element.data('index', index);\n\t    $element.find('.roadmap-item-name').text(text);\n\t    $element.attr('title', text);\n\t    if (changed) {\n\t        $element.addClass('roadmap-item-new');\n\t    }\n\t    return $element;\n\t}\n\t\n\tvar storeView = [];\n\tvar thresholdMarkup = '<h5>Candidates</h5>';\n\t\n\tfunction renderRoadmap(store, thresholdValue) {\n\t    var $elementContainer = $('#roadmap_items');\n\t    var newStoreView = [];\n\t    var nbItems = store.length;\n\t    $elementContainer.html('');\n\t    if (nbItems) {\n\t        $('#roadmap_items_tips').addClass('hidden');\n\t        store.forEach(function (text, index) {\n\t            if (thresholdValue && index === thresholdValue) {\n\t                $elementContainer.append(thresholdMarkup);\n\t            }\n\t            $elementContainer.append(createElement(text, index, nbItems, storeView[index] !== text, false, index >= thresholdValue));\n\t            newStoreView[index] = text;\n\t        });\n\t        // add last element for DnD\n\t        $elementContainer.append('<div class=\"roadmap-item clearfix\"></div>');\n\t    } else {\n\t        $('#roadmap_items_tips').removeClass('hidden');\n\t    }\n\t    // keep a copy for the view\n\t    storeView = newStoreView;\n\t}\n\t\n\tfunction renderReference(storeReference, thresholdValue) {\n\t    var $elementContainer = $('#reference_items');\n\t    $elementContainer.html('');\n\t    storeReference.forEach(function (text, index) {\n\t        if (thresholdValue && index === thresholdValue) {\n\t            $elementContainer.append(thresholdMarkup);\n\t        }\n\t        $elementContainer.append(createElement(text, index, null, true, true, index >= thresholdValue));\n\t    });\n\t}\n\t\n\tfunction displayOnline(online) {\n\t    var $online = $('#online');\n\t    $online.html('');\n\t    for (var key in online) {\n\t        if (online[key]) {\n\t            $online.append('<li id=\"user_' + key + '\">' + key + '</li>');\n\t        }\n\t    }\n\t}\n\t\n\tfunction renderActionNotification(index, event) {\n\t    var $item = $('#roadmap_item_' + index + ' > div');\n\t    $item.removeClass('roadmap-item-notif-up, roadmap-item-notif-down');\n\t    $('.roadmap-author', $item).text(event.visa).removeClass('roadmap-author-new');\n\t    setTimeout(function () {\n\t        $item.addClass('roadmap-item-notif-' + (event.direction < 0 ? 'up' : 'down'));\n\t        $('.roadmap-author', $item).addClass('roadmap-author-new');\n\t    }, 10);\n\t}\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** roadmap.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 883662743a122660fc63\n **/","/*global $ Firebase c3:true*/\nimport * as helper from './helper';\nimport * as view from './view';\n\n$(function() {\n\n\tvar hash = 'room_' + window.location.hash.replace(/[\\#\\.\\[\\]\\$]/g, '');\n\t// DEV - PROD switch\n\tvar baseDomain = window.location.host.indexOf('localhost') !== -1 ? 'roadmap2' : 'amber-torch-7267';\n\n\tvar base = new Firebase('https://' + baseDomain + '.firebaseio.com/');\n\tvar room = base.child(hash);\n\tvar roadmap = room.child('roadmap');\n\tvar reference = room.child('reference');\n\tvar threshold = room.child('threshold');\n\tvar history = room.child('history');\n\tvar presence = room.child('presence');\n\n\t/**\n\t *\n\t * SHARED VARS\n\t *\n\t */\n\n\tvar store = [];\n\tvar storeReference = [];\n\tvar thresholdValue = 0;\n\tvar showingStats = false;\n\n\t/**\n\t *\n\t * FUNCTIONAL\n\t *\n\t */\n\n\troadmap.on('value', function(newStoreResp) {\n\t\tstore = newStoreResp.val() || [];\n\t\tview.renderRoadmap(store, thresholdValue);\n\t});\n\treference.on('value', function(data) {\n\t\tstoreReference = data.val() || [];\n\t\tview.renderReference(storeReference, thresholdValue);\n\n\t});\n\tthreshold.on('value', function(data) {\n\t\tthresholdValue = data.val();\n\t\tview.renderRoadmap(store, thresholdValue);\n\t\tview.renderReference(storeReference, thresholdValue);\n\t});\n\n\tfunction broadcast() {\n\t\troadmap.set(store);\n\t}\n\thistory.limitToLast(1).on('child_added', function(childSnapshot) {\n\t\tvar event = childSnapshot.val();\n\t\tstore.forEach(function(text, index) {\n\t\t\tif (text === event.value) {\n\t\t\t\tview.renderActionNotification(index, event);\n\t\t\t}\n\t\t});\n\t\t// active user tracking\n\t\t$('#user_' + event.visa).removeClass('user-active');\n\t\tsetTimeout(function() {\n\t\t\t$('#user_' + event.visa).addClass('user-active');\n\t\t}, 10);\n\t});\n\n\t// login & presence\n\tvar visa;\n\tbase.onAuth(function(authData) {\n\t\tif (authData) {\n\t\t\tvar uid = authData.uid;\n\t\t\tconsole.log('Authenticated user with uid:', uid);\n\t\t\tbase.child('users/' + uid).on('value', function(data) {\n\t\t\t\tvisa = data.val();\n\t\t\t\t$('#main, nav, footer').removeClass('hidden');\n\t\t\t\t$('#welcome').addClass('hidden');\n\t\t\t\t$('#visa').text(visa);\n\n\t\t\t\t//  online status\n\t\t\t\tvar amOnline = base.child('.info/connected');\n\t\t\t\tvar userRef = room.child('presence/' + visa);\n\t\t\t\tamOnline.on('value', function(snapshot) {\n\t\t\t\t\tif (snapshot.val()) {\n\t\t\t\t\t\tuserRef.onDisconnect().remove();\n\t\t\t\t\t\tuserRef.set(true);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\t$('#welcome').removeClass('hidden');\n\t\t\t$('#visa_input').focus();\n\t\t\t$('#main, #stats, nav, footer').addClass('hidden');\n\t\t\t$('#admin_block').addClass('hidden');\n\t\t}\n\t});\n\tpresence.on('value', function(data) {\n\t\tif (data) {\n\t\t\tview.displayOnline(data.val());\n\t\t}\n\t});\n\n\t/**\n\t *\n\t * CHARTING\n\t *\n\t */\n\tvar chart = c3.generate({\n\t\tdata: {\n\t\t\tx: 'x',\n\t\t\tcolumns: [\n\t\t\t\t['x'],\n\t\t\t],\n\t\t\ttype: 'area-spline'\n\t\t},\n\t\taxis: {\n\t\t\ty: {\n\t\t\t\tpadding: 0\n\t\t\t},\n\t\t\tx: {\n\t\t\t\ttick: {\n\t\t\t\t\tformat: function(x) {\n\t\t\t\t\t\tvar time = x * 10000;\n\t\t\t\t\t\tvar date = new Date(time);\n\t\t\t\t\t\treturn helper.format2(date.getHours()) + ':' + helper.format2(date.getMinutes());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\ttransition: {\n\t\t\tduration: 100\n\t\t}\n\t});\n\n\tvar times = [];\n\tvar saved = [];\n\tvar users = {};\n\tvar userStats = {};\n\tvar nbPoints = 60;\n\n\thistory.on('child_added', function(childSnapshot) {\n\t\tvar event = childSnapshot.val();\n\t\tsaved.push(event);\n\t\t// update user stats\n\t\tvar eventVisa = event.visa;\n\t\tvar user = userStats[eventVisa];\n\t\tif (!user) {\n\t\t\tuser = {\n\t\t\t\tup: 0,\n\t\t\t\tdown: 0,\n\t\t\t\ttotal: 0,\n\t\t\t\ttoRef: 0,\n\t\t\t\tagainstRef: 0\n\t\t\t};\n\t\t\tuserStats[eventVisa] = user;\n\t\t}\n\t\tuser.total++;\n\t\tif (event.direction > 0) {\n\t\t\tuser.down++;\n\t\t\tif (event.index >= event.refIndex) {\n\t\t\t\tuser.againstRef++;\n\t\t\t} else {\n\t\t\t\tuser.toRef++;\n\t\t\t}\n\t\t} else {\n\t\t\tuser.up++;\n\t\t\tif (event.index <= event.refIndex) {\n\t\t\t\tuser.againstRef++;\n\t\t\t} else {\n\t\t\t\tuser.toRef++;\n\t\t\t}\n\t\t}\n\t});\n\t// running\n\tvar statRules = [{\n\t\tid: 'active',\n\t\tfn: function(user) {\n\t\t\treturn user.total;\n\t\t}\n\t}, {\n\t\tid: 'up',\n\t\tfn: function(user) {\n\t\t\treturn user.up * 100 / user.total;\n\t\t}\n\t}, {\n\t\tid: 'ref',\n\t\tfn: function(user) {\n\t\t\treturn user.toRef * 100 / user.total;\n\t\t}\n\t}];\n\n\tfunction showStats() {\n\t\tvar stats = statRules.map(function(rule) {\n\t\t\treturn {\n\t\t\t\tid: rule.id,\n\t\t\t\tmost: {\n\t\t\t\t\tvalue: null,\n\t\t\t\t\tvisa: '???'\n\t\t\t\t},\n\t\t\t\tless: {\n\t\t\t\t\tvalue: null,\n\t\t\t\t\tvisa: '???'\n\t\t\t\t}\n\t\t\t};\n\t\t});\n\t\t// compute results\n\t\tvar handleRule = function(userVisa) {\n\t\t\treturn function(rule, index) {\n\t\t\t\tvar value = rule.fn(userStats[userVisa]);\n\t\t\t\tvar stat = stats[index];\n\t\t\t\tvar most = stat.most;\n\t\t\t\tvar less = stat.less;\n\t\t\t\tif (most.value === null || value >= most.value) {\n\t\t\t\t\tmost.value = value;\n\t\t\t\t\tmost.userVisa = userVisa;\n\t\t\t\t}\n\t\t\t\tif (less.value === null || value < less.value) {\n\t\t\t\t\tless.value = value;\n\t\t\t\t\tless.userVisa = userVisa;\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t\tfor (var userVisa in userStats) {\n\t\t\tstatRules.forEach(handleRule(userVisa));\n\t\t}\n\t\t// display results\n\t\tstats.forEach(function(stat) {\n\t\t\t$('#stats_most_' + stat.id + ' .stats-card-visa').text(stat.most.visa);\n\t\t\t$('#stats_less_' + stat.id + ' .stats-card-visa').text(stat.less.visa);\n\t\t});\n\t}\n\n\tsetInterval(function() {\n\t\tvar time = Math.floor(Date.now() / 10000);\n\t\tvar remaining = [];\n\n\t\t// initial build\n\t\tif (!times.length) {\n\t\t\tfor (var i = 0; i < nbPoints; i++) {\n\t\t\t\ttimes.unshift(time - i);\n\t\t\t}\n\t\t}\n\n\t\t// build new time\n\t\tvar index = times.indexOf(time);\n\t\tif (index === -1) {\n\t\t\ttimes.push(time);\n\t\t\ttimes.shift();\n\t\t\tObject.keys(users).forEach((key) => {\n\t\t\t\tvar stats = users[key];\n\t\t\t\tstats.push(0);\n\t\t\t\tstats.shift();\n\t\t\t});\n\t\t}\n\n\t\t// reintegrate values\n\t\tsaved.forEach(function(event) {\n\t\t\tvar eventTime = Math.floor(event.time / 10000);\n\t\t\tvar eventVisa = event.visa;\n\t\t\tvar lastTime = times[times.length - 1];\n\t\t\tvar timeIndex = times.indexOf(eventTime);\n\t\t\t// save this for later\n\t\t\tif (timeIndex === -1 && time > lastTime) {\n\t\t\t\tremaining.push(event);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar stats = users[eventVisa];\n\t\t\tif (!stats) {\n\t\t\t\tstats = times.map(function() {\n\t\t\t\t\treturn 0;\n\t\t\t\t});\n\t\t\t\tusers[eventVisa] = stats;\n\t\t\t}\n\t\t\tvar value = stats[timeIndex];\n\t\t\tstats[timeIndex] = !value ? 1 : value + 1;\n\t\t});\n\t\tsaved = remaining;\n\n\t\t// dont process if not showing\n\t\tif (!showingStats) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// propagate to chart\n\t\tvar columns = [\n\t\t\t['x'].concat(times)\n\t\t];\n\t\tfor (var user in users) {\n\t\t\tcolumns.push([user].concat(users[user]));\n\t\t}\n\t\tchart.load({\n\t\t\tcolumns: columns\n\t\t});\n\t\t// update stats as well\n\t\tshowStats();\n\t}, 2000);\n\n\t/**\n\t *\n\t * DOM HANDLERS\n\t *\n\t */\n\n\t// roadmap handlers\n\t$('#nav_admin').on('click', function() {\n\t\t$('#admin_block').toggleClass('hidden');\n\t\t$('#main').toggleClass('admin');\n\t\t$('#admin_roadmap_item').focus();\n\t\treturn false;\n\t});\n\t$('#admin_add').on('submit', function() {\n\t\tvar $item = $('#admin_roadmap_item');\n\t\tvar value = $item.val();\n\t\tif (value) {\n\t\t\tstore.push(value);\n\t\t\t$item.val('');\n\t\t\tbroadcast();\n\t\t}\n\t\treturn false;\n\t});\n\t$('#admin_threshold').on('submit', function() {\n\t\tvar $item = $('#admin_roadmap_threshold');\n\t\tvar value = parseInt($item.val(), 10);\n\t\tif (!isNaN(value)) {\n\t\t\tthreshold.set(value);\n\t\t\t$item.val('');\n\t\t}\n\t\treturn false;\n\t});\n\t$('#nav_reference').on('click', function() {\n\t\treference.set(store);\n\t\treturn false;\n\t});\n\n\t// upload / download\n\t$('#roadmap_items_download').on('click', function() {\n\t\tvar content = JSON.stringify({\n\t\t\tref: storeReference,\n\t\t\tstore: store,\n\t\t\tthreshold: thresholdValue\n\t\t});\n\t\thelper.downloadAsFile(new Blob([content], {\n\t\t\ttype: 'application/json'\n\t\t}), 'roadmap.json');\n\t\treturn false;\n\t});\n\t$('body')\n\t\t.on('dragover', function(event) {\n\t\t\tvar originalEvent = event.originalEvent;\n\t\t\toriginalEvent.dataTransfer.dropEffect = 'copy';\n\t\t\treturn false;\n\t\t})\n\t\t.on('drop', function(event) {\n\t\t\tvar originalEvent = event.originalEvent;\n\t\t\tvar file = originalEvent.dataTransfer.files[0];\n\t\t\tvar reader = new FileReader();\n\t\t\treader.onload = function(e) {\n\t\t\t\tvar data = null;\n\t\t\t\ttry {\n\t\t\t\t\tdata = JSON.parse(e.target.result);\n\t\t\t\t} catch (X_x) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (data) {\n\t\t\t\t\tthreshold.set(data.threshold);\n\t\t\t\t\treference.set(data.ref);\n\t\t\t\t\tstore = data.store;\n\t\t\t\t\tbroadcast();\n\t\t\t\t}\n\t\t\t};\n\t\t\treader.readAsText(file);\n\t\t\treturn false;\n\t\t});\n\n\t// items handlers\n\tfunction swap(direction) {\n\t\treturn function() {\n\t\t\tvar index = $(this).parents('.roadmap-item').data('index');\n\t\t\tif (index === null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// swap values\n\t\t\tvar value = store[index];\n\t\t\tstore[index] = store[index + direction];\n\t\t\tstore[index + direction] = value;\n\t\t\tbroadcast();\n\t\t\t// also save changed\n\t\t\tif (visa) {\n\t\t\t\tvar refIndex = storeReference.indexOf(value);\n\t\t\t\tvar historyRef = history.push();\n\t\t\t\thistoryRef.set({\n\t\t\t\t\tvisa: visa,\n\t\t\t\t\tindex: index,\n\t\t\t\t\trefIndex: refIndex,\n\t\t\t\t\tvalue: value,\n\t\t\t\t\ttime: Firebase.ServerValue.TIMESTAMP,\n\t\t\t\t\tdirection: direction\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t}\n\n\t$('#roadmap_items')\n\t\t.on('click', '.roadmap-item-up', swap(-1))\n\t\t.on('click', '.roadmap-item-down', swap(1))\n\t\t.on('click', '.roadmap-item-delete', function() {\n\t\t\tvar index = $(this).parents('.roadmap-item').data('index');\n\t\t\tstore.splice(index, 1);\n\t\t\tbroadcast();\n\t\t\treturn false;\n\t\t})\n\t\t.on('dragstart', '.roadmap-item', function(event) {\n\t\t\tif (!$('#main').hasClass('admin')) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar originalEvent = event.originalEvent;\n\t\t\tvar $item = $(this);\n\t\t\t$item.addClass('roadmap-item-dragging');\n\t\t\toriginalEvent.dataTransfer.effectAllowed = 'move';\n\t\t\toriginalEvent.dataTransfer.setData('application/json', JSON.stringify({\n\t\t\t\tindex: $item.data('index'),\n\t\t\t\titem: $item.find('.roadmap-item-name').text()\n\t\t\t}));\n\t\t\t// delay target placeholder display, otherwise stops the drag because\n\t\t\t// of the next element\n\t\t\tsetTimeout(function() {\n\t\t\t\t$('#roadmap_items .roadmap-item:not(.roadmap-item-dragging)').addClass('roadmap-item-drop-target');\n\t\t\t}, 100);\n\t\t})\n\t\t.on('dragenter', '.roadmap-item', function() {\n\t\t\tvar $this = $(this);\n\t\t\tif ($this.hasClass('roadmap-item-drop-target')) {\n\t\t\t\t$(this).addClass('roadmap-item-drop-target-enter');\n\t\t\t}\n\t\t})\n\t\t.on('dragover', '.roadmap-item', function(event) {\n\t\t\tvar originalEvent = event.originalEvent;\n\t\t\toriginalEvent.dataTransfer.dropEffect = 'move';\n\t\t\treturn false;\n\t\t})\n\t\t.on('dragleave', '.roadmap-item', function(event) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tvar $this = $(this);\n\t\t\t$this.removeClass('roadmap-item-drop-target-enter');\n\n\t\t})\n\t\t.on('dragend', '.roadmap-item', function() {\n\t\t\t$(this).removeClass('roadmap-item-dragging');\n\t\t\t$('#roadmap_items .roadmap-item').removeClass('roadmap-item-drop-target')\n\t\t\t\t.removeClass('roadmap-item-drop-target-enter');\n\t\t})\n\t\t.on('drop', '.roadmap-item', function(event) {\n\t\t\tvar originalEvent = event.originalEvent;\n\t\t\tvar targetIndex = $(this).data('index');\n\t\t\tvar originIndex = JSON.parse(originalEvent.dataTransfer.getData('application/json')).index;\n\t\t\t// no index : push at the end\n\t\t\tif (targetIndex !== 0 && !targetIndex) {\n\t\t\t\ttargetIndex = store.length;\n\t\t\t}\n\t\t\t// removing will shift the index\n\t\t\tif (originIndex < targetIndex) {\n\t\t\t\ttargetIndex--;\n\t\t\t}\n\t\t\tvar item = store.splice(originIndex, 1);\n\t\t\tstore.splice(targetIndex, 0, item);\n\t\t\tbroadcast();\n\t\t\treturn false;\n\t\t});\n\n\t// login handlers\n\t$('#welcome form').on('submit', function(event) {\n\n\t\tevent.preventDefault();\n\t\t// toggle display\n\t\t$(this).hide();\n\t\t$('#welcome .progress').removeClass('hidden');\n\t\tvar login = $('#visa_input').val();\n\n\t\tbase.authAnonymously(function(error, authData) {\n\t\t\tif (error) {\n\t\t\t\tconsole.log('Authentication Failed!', error);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar uid = authData.uid;\n\t\t\tbase.child('users/' + uid).set(login);\n\t\t\t$('#welcome').hide();\n\t\t\t$('#welcome form').show();\n\t\t\t$('#welcome').addClass('hidden');\n\t\t\t$('#welcome .progress').addClass('hidden');\n\t\t});\n\t});\n\t$('#nav_logout').on('click', function() {\n\t\tbase.unauth();\n\t\treturn false;\n\t});\n\n\t$('#nav_stats, #stats h2 .close').on('click', function() {\n\t\t$('#stats, #main').toggleClass('hidden');\n\t\tshowingStats = !showingStats;\n\t\tif (showStats) {\n\t\t\tshowStats();\n\t\t\tif ($('#main').hasClass('admin')) {\n\t\t\t\t$('#nav_admin').trigger('click');\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t});\n\t$('#nav_toggle').on('click', function() {\n\t\t$('nav .navbar-right').toggleClass('hidden-xs');\n\t});\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** C:/Users/BBA/Documents/GitHub/roadmap/source/js/roadmap.js\n **/","export function format2(int) {\r\n    return int < 10 ? '0' + int : '' + int;\r\n}\r\n\r\n// stolen from piskel\r\nexport function downloadAsFile(content, filename) {\r\n    var saveAs = window.saveAs || (navigator.msSaveBlob && navigator.msSaveBlob.bind(navigator));\r\n    if (saveAs) {\r\n        saveAs(content, filename);\r\n    } else {\r\n        var downloadLink = document.createElement('a');\r\n        var href = window.URL.createObjectURL(content);\r\n        downloadLink.setAttribute('href', href);\r\n        downloadLink.setAttribute('download', filename);\r\n        document.body.appendChild(downloadLink);\r\n        downloadLink.click();\r\n        document.body.removeChild(downloadLink);\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** C:/Users/BBA/Documents/GitHub/roadmap/source/js/helper.js\n **/","/*global $:true*/\r\n\r\nexport function createElement(text, index, total, changed, isReference, isCandidate) {\r\n    let markup = [\r\n        '<div class=\"roadmap-item clearfix ' + (isCandidate ? 'roadmap-item-candidate' : '') + '\"' +\r\n        (!isReference ? 'id=\"roadmap_item_' + index + '\"' : '') + '  draggable=\"true\">',\r\n        '<div>'\r\n    ];\r\n\r\n    if (!isReference) {\r\n        markup.push('<span class=\"roadmap-item-grab-handle glyphicon glyphicon-move\"></span>');\r\n    }\r\n\r\n    markup.push('<span class=\"roadmap-item-name\"></span>');\r\n\r\n    if (!isReference) {\r\n        let isNotLast = total && total - 1 !== index;\r\n        markup = markup.concat([\r\n            '<span class=\"roadmap-author\"></span>',\r\n            isNotLast ? '<a href=\"#\" class=\"roadmap-item-down\">' : '',\r\n            isNotLast ? '<span class=\"glyphicon glyphicon-arrow-down\" aria-hidden=\"true\"></span>' : '',\r\n            isNotLast ? '</a>' : '',\r\n            index ? '<a href=\"#\" class=\"roadmap-item-up\">' : '',\r\n            index ? '<span class=\"glyphicon glyphicon-arrow-up\" aria-hidden=\"true\"></span>' : '',\r\n            index ? '</a>' : '',\r\n            '<a href=\"#\" class=\"roadmap-item-delete\">',\r\n            '<span class=\"glyphicon glyphicon-trash\" aria-hidden=\"true\"></span>',\r\n            '</a>'\r\n        ]);\r\n    }\r\n\r\n    markup.push('</div></div>');\r\n\r\n    let $element = $(markup.join(''));\r\n    $element.data('index', index);\r\n    $element.find('.roadmap-item-name').text(text);\r\n    $element.attr('title', text);\r\n    if (changed) {\r\n        $element.addClass('roadmap-item-new');\r\n    }\r\n    return $element;\r\n}\r\n\r\nvar storeView = [];\r\nvar thresholdMarkup = '<h5>Candidates</h5>';\r\n\r\nexport function renderRoadmap(store, thresholdValue) {\r\n    let $elementContainer = $('#roadmap_items');\r\n    let newStoreView = [];\r\n    let nbItems = store.length;\r\n    $elementContainer.html('');\r\n    if (nbItems) {\r\n        $('#roadmap_items_tips').addClass('hidden');\r\n        store.forEach(function(text, index) {\r\n            if (thresholdValue && index === thresholdValue) {\r\n                $elementContainer.append(thresholdMarkup);\r\n            }\r\n            $elementContainer.append(createElement(text, index, nbItems, storeView[index] !== text, false, index >= thresholdValue));\r\n            newStoreView[index] = text;\r\n        });\r\n        // add last element for DnD\r\n        $elementContainer.append('<div class=\"roadmap-item clearfix\"></div>');\r\n    } else {\r\n        $('#roadmap_items_tips').removeClass('hidden');\r\n    }\r\n    // keep a copy for the view\r\n    storeView = newStoreView;\r\n}\r\n\r\nexport function renderReference(storeReference, thresholdValue) {\r\n    let $elementContainer = $('#reference_items');\r\n    $elementContainer.html('');\r\n    storeReference.forEach(function(text, index) {\r\n        if (thresholdValue && index === thresholdValue) {\r\n            $elementContainer.append(thresholdMarkup);\r\n        }\r\n        $elementContainer.append(createElement(text, index, null, true, true, index >= thresholdValue));\r\n    });\r\n}\r\n\r\nexport function displayOnline(online) {\r\n    let $online = $('#online');\r\n    $online.html('');\r\n    for (let key in online) {\r\n        if (online[key]) {\r\n            $online.append(`<li id=\"user_${key}\">${key}</li>`);\r\n        }\r\n    }\r\n}\r\n\r\nexport function renderActionNotification(index, event) {\r\n    let $item = $('#roadmap_item_' + index + ' > div');\r\n    $item.removeClass('roadmap-item-notif-up, roadmap-item-notif-down');\r\n    $('.roadmap-author', $item)\r\n        .text(event.visa)\r\n        .removeClass('roadmap-author-new');\r\n    setTimeout(function() {\r\n        $item.addClass('roadmap-item-notif-' + (event.direction < 0 ? 'up' : 'down'));\r\n        $('.roadmap-author', $item)\r\n            .addClass('roadmap-author-new');\r\n    }, 10);\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** C:/Users/BBA/Documents/GitHub/roadmap/source/js/view.js\n **/"],"sourceRoot":""}